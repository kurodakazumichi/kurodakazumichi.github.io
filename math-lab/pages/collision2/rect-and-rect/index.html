
<!DOCTYPE html>
<html>
  <head>
    <title>矩形と矩形の衝突 | 無職の学び舎 </title>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-180265202-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-180265202-1');
    </script>

    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
    <meta property="og:type" content="article" />
    <meta property="og:title" content="矩形と矩形の衝突" />
    <meta property="og:site_name" content="無職はゲーム数学の勉強をする | 無職の学び舎" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@ProgPuyan" />
    
    <script src="../../../assets/js/mathLab.js?v=202010151819"></script>
    <link rel="stylesheet" href="../../../assets/css/default.css?v=202010151819">

    
    <script src="../../../venders/somali/somali.min.js?v=202010151819"></script>
    <script src="../../../venders/highlight/highlight.pack.js"></script>
    <link rel="stylesheet" href="../../../venders/highlight/atom-one-dark.css">

    <script>
      MathJax = {
        chtml: {
          matchFontHeight: false
        },
        tex: {
          inlineMath: [['$', '$']]
        }
      };
    </script>
    <script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
    </script>    

    <script src="../../../assets/js/props.js?v=202010151819"></script>
  </head>
  <body>
    <header>
      <ol itemscope itemtype="https://schema.org/BreadcrumbList">
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a itemprop="item" href="https://www.nekonecode.com">
            <span itemprop="name">無職の学び舎</span>
          </a>
          <meta itemprop="position" content="1" />
        </li>
        <li>&gt;</li>
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a itemprop="item" href="../../../index.html">
            <span itemprop="name">無職はゲーム数学の勉強をする</span>
          </a>
          <meta itemprop="position" content="2" />
        </li>
        <li>&gt;</li>
        <li>矩形と矩形の衝突</li>
      </ol>      
    </header>
    <main>
      <article>
        <h1>矩形と矩形の衝突</h1>
        <div id="graph1"></div>

<p>回転しない矩形と矩形の衝突についてまとめていきます。</p>

<h2>考え方</h2>

<p>回転しない矩形同士の判定は特に難しい計算は登場しません。</p>

<p>ただ、この時は当たっていない、この時も当たっていない、と当たっていないケースを愚直に判定していきます。</p>

<p>実際に図で見たほうがわかりやすいと思うので図解していきます。</p>

<div id="graph2_0"></div>
<p>一方の矩形を $R1$、もう一つの矩形を $R2$ とします。</p>

<h3>$R2$ が $R1$ の左にあってあたってないケース</h3>

<div id="graph2_1"></div>
<p>$R2$ の右端 の $x$ 座標が、$R1$ の左端の $x$ 座標より小さければ、これはもう当たっていません。</p>

<h3>$R2$ が $R1$ の右にあって、あたってないケース</h3>
<div id="graph2_2"></div>

<p>$R2$ の左端 の $x$ 座標が、$R1$ の右端の $x$ 座標より大きければ、これはもう当たっていません。</p>

<h3>$R2$ が $R1$ の下にあって、あたってないケース</h3>

<div id="graph2_3"></div>
<p>$R2$ の上端 の $y$ 座標が、$R1$ の下端の $y$ 座標より小さければ、これはもう当たっていません。</p>

<h3>$R2$ が $R1$ の上にあって、あたってないケース</h3>

<div id="graph2_4"></div>
<p>$R2$ の下端 の $y$ 座標が、$R1$ の上端の $y$ 座標より大きれば、これはもう当たっていません。</p>

<h3>上記４パターン以外であれば当たっている</h3>

<p>$R2$ が $R1$ の完全に左にあるのか、右にあるのか、下にあるのか、上にあるのか</p>

<p>いずれかの条件に一致した瞬間、矩形同士は衝突していないことになります。</p>

<p>逆に、全ての条件に一致しなかった場合、矩形同士は衝突しています。</p>

<p>条件が多く、ちょっとややこしさはありますが、落ち着いて考えれば難しくないと思います。</p>

<h2>サンプルコード</h2>

<pre><code>/**
  * 矩形と矩形が当たっているかどうか
  * @param r1 矩形１
  * @param r2 矩形２
  */
 export function isHit(r1:Rect, r2:Rect) 
 {
   // x座標に関する判定
   if (r2.maxX < r1.minX) return false;
   if (r1.maxX < r2.minX) return false;
 
   // y座標に関する判定
   if (r2.maxY < r1.minY) return false;
   if (r1.maxY < r2.minY) return false;
 
   return true;
 }</code></pre>
      </article>
    </main>

    <footer>
      <span>無職の学び舎 | Nekonecode</span>
    </footer>
    
    <script src="main.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>